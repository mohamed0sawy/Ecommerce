<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script th:src="@{/js/content-script.js}"></script>

<script>
        function toggleAdminStatus(button) {
        var adminId = button.getAttribute('data-admin-id');
        var adminEnabled = button.getAttribute('data-admin-enabled') === 'true';

        // Fetch CSRF token from meta tags
        var csrfToken = document.querySelector("meta[name='_csrf']").getAttribute("content");
        var csrfHeader = document.querySelector("meta[name='_csrf_header']").getAttribute("content");

        // Perform an AJAX request to toggle admin status
        var url = '/admins/toggle-status/' + adminId;
        fetch(url, {
        method: 'PUT',
        headers: {
        'Content-Type': 'application/json',
        [csrfHeader]: csrfToken // Include CSRF token in headers
    },
        body: JSON.stringify({ enabled: !adminEnabled }),
    })
        .then(response => {
        if (!response.ok) {
        throw new Error('Network response was not ok');
    }
        return response.json();
    })
        .then(data => {
            if (data.enabled) {
                button.innerText = 'Disable';
                button.classList.remove('btn-success');
                button.classList.add('btn-danger');
            } else {
                button.innerText = 'Enable';
                button.classList.remove('btn-danger');
                button.classList.add('btn-success');
            }
            button.setAttribute('data-admin-enabled', data.enabled);
    })
        .catch((error) => {
        console.error('Error:', error);
    });
    }
</script>





